<apex:page controller="GetAccountTransactionPDFController" renderAs="pdf" 
           applyBodyTag="false" showHeader="false" sidebar="false" standardStylesheets="false">
    <head>
        <style>
            @page {
                size: A4;
                margin-left: 1cm;
                margin-right: 1cm;
                margin-top: 1cm;
                margin-bottom: 1cm;
                
                @top-center { content: element(header); }
                @bottom-center { content: element(footer); }
            }
            
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            .page-number:before {
                content: "Page " counter(page) " of " counter(pages);
            }
            
            .no-data {
                font-style: italic;
                color: #666;
                padding: 15px;
                text-align: center;
                background-color: #f9f9f9;
                border: 1px dashed #ccc;
                margin-bottom: 20px;
            }
            
            .page-break { 
                page-break-after: always; 
            }
        </style>
    </head>
    
    <body style="font-family:Arial, sans-serif; font-size: 12px; line-height: 1.4; color: #000;">
        <!-- Header -->
        <div style="display: block; padding: 15px; border-bottom: 2px solid #000;">
            <div style="margin-bottom: 20px;">
                <table style="width: 100%; border: none; border-collapse: collapse; border-width: 0px">
                    <tr>
                        <td style="width: 50%;">
                        	<div style="font-size: 25px; font-weight: bold; color: #000;">Account Activity Statement</div>
                        </td>
                        <td style="width: 50%; text-align: right;">
                        	<div style="font-size: 25px; font-weight: bold; color: #000;">Aedon.Accounting</div>
                        </td>
                    </tr>
                </table>
            </div>
            
            <div style="display: table; width: 100%; margin-top: 10px;">
                <!-- Left Column - Customer Details -->
                <div style="display: table-cell; vertical-align: top; padding-right: 20px; width: 33.33%;">
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">{!accountDetails.Name}</div>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.BillingStreet))}">
                        <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.BillingStreet}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.BillingCity))}">
                        <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.BillingCity}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.BillingState))}">
                        <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.BillingState}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.BillingPostalCode))}">
                        <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.BillingPostalCode}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.BillingCountry))}">
                        <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.BillingCountry}</div>
                    </apex:outputPanel>
                </div>
                
                <!-- Middle Column - Statement Details -->
                <div style="display: table-cell; vertical-align: top; padding-right: 20px; width: 33.33%;">
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">Statement Date</div>
                    <div style="font-size: 11px; margin-bottom: 3px; color: #000;">
                        <apex:outputText value="{0,date,dd/MM/yyyy}">
                            <apex:param value="{!NOW()}"/>
                        </apex:outputText>
                    </div>
                    <br/>
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">Sent Date</div>
                    <div style="font-size: 11px; margin-bottom: 3px; color: #000;">
                        <apex:outputText value="{0,date,dd/MM/yyyy}">
                            <apex:param value="{!NOW()}"/>
                        </apex:outputText>
                    </div>
                    <br/>
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">Currency</div>
                    <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Currency__r.Name}</div>
                </div>
                
                <!-- Right Column - Company Address -->
                <div style="display: table-cell; vertical-align: top; padding-right: 20px; width: 33.33%;">
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Name))}">
                     	<div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">{!accountDetails.Company__r.Name}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Address_Line1__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Address_Line1__c}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Address_Line2__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Address_Line2__c}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Company_Street__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Company_Street__c}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Company_City__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Company_City__c}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Company_State__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Company_State__c}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Company_PostalCode__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Company_PostalCode__c}</div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!NOT(ISBLANK(accountDetails.Company__r.Company_Country__c))}">
                    	<div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Company_Country__c}</div>
                    </apex:outputPanel>
                </div>
            </div>
            
            <div style="display: table; width: 100%; margin-top: 10px;">
                <!-- Account Number and VAT Number -->
                <div style="display: table-cell; vertical-align: top; padding-right: 20px; width: 33.33%;">
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">Account Number</div>
                    <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.AccountNumber}</div>
                </div>
                <div style="display: table-cell; vertical-align: top; padding-right: 20px; width: 33.33%;">
                    <!-- Empty for spacing -->
                </div>
                <div style="display: table-cell; vertical-align: top; padding-right: 20px; width: 33.33%;">
                    <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #000;">VAT Number</div>
                    <div style="font-size: 11px; margin-bottom: 3px; color: #000;">{!accountDetails.Company__r.Company_Registration_Number__c}</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top:10px;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                	<tr>
                    	<th style="width: 15%; text-align: center; font-size: 11px; padding-bottom: 8px; border-bottom: 2px solid #000;">Date</th>
                        <th style="width: 18%; text-align: center; font-size: 11px; padding-bottom: 8px; border-bottom: 2px solid #000;">Invoice Number</th>
                        <th style="width: 19%; text-align: center; font-size: 11px; padding-bottom: 8px; border-bottom: 2px solid #000;">Account</th>
                        <th style="width: 15%; text-align: center; font-size: 11px; padding-bottom: 8px; border-bottom: 2px solid #000;">Currency</th>
                        <th style="width: 15%; text-align: right; font-size: 11px; padding-bottom: 8px; border-bottom: 2px solid #000;">Gross</th>
                        <th style="width: 18%; text-align: right; font-size: 11px; padding-bottom: 8px; border-bottom: 2px solid #000;">Outstanding</th>
                    </tr>
                </thead>
                <tbody>
                    <apex:repeat value="{!transactionRecords}" var="txn">
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000;">
                                {!txn.transactionDate}
                            </td>
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000;">
                                {!txn.invoiceNumber}
                            </td>
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000;">
                                {!txn.accountName}
                            </td>
                            <!-- <td style="text-align: center; font-size: 10px; padding: 6px; color: #000;">
                                {!tr.reference}
                            </td> -->
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000;">
                                {!txn.currencyName}
                            </td>
                            <td style="text-align: right; font-size: 10px; color: #000;">
                                <apex:outputText value="{0, number, ###,###,##0.00}" rendered="{!NOT(ISBLANK(txn.grossAmount))}">
                                    <apex:param value="{!txn.grossAmount}"/>
                                </apex:outputText>
                            </td>
                            <td style="text-align: right; font-size: 10px; color: #000;">
                                <apex:outputText value="{0, number, ###,###,##0.00}" rendered="{!NOT(ISBLANK(txn.outstandingAmount))}">
                                    <apex:param value="{!txn.outstandingAmount}"/>
                                </apex:outputText>
                            </td>
                        </tr>
                    </apex:repeat>
                    
                    <!-- Total Row -->
                    <!-- <apex:outputPanel rendered="{!transactionRecords.size > 0}"> -->
                        <tr>
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000; border-top: 1px solid #000; border-bottom: 1px solid #000;"></td>
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000; border-top: 1px solid #000; border-bottom: 1px solid #000;"></td>
                            <td style="text-align: center; font-size: 10px; padding: 6px; color: #000; border-top: 1px solid #000; border-bottom: 1px solid #000;"></td>
                            <td style="text-align: center; font-size: 11px; padding: 6px; color: #000; border-top: 1px solid #000; border-bottom: 1px solid #000; font-weight: bold;">Total</td>
                            <td style="text-align: right; font-size: 11px; padding: 10px 0px; color: #000; font-weight: bold; border-top: 1px solid #000; border-bottom: 1px solid #000;">
                                <apex:outputText value="{0, number, ###,###,##0.00}">
                                    <apex:param value="{!totalGrossAmount}"/>
                                </apex:outputText>
                            </td>
                            <td style="text-align: right; font-size: 11px; padding: 10px 0px; color: #000; font-weight: bold; border-top: 1px solid #000; border-bottom: 1px solid #000;">
                                <apex:outputText value="{0, number, ###,###,##0.00}">
                                    <apex:param value="{!totalOutstandingAmount}"/>
                                </apex:outputText>
                            </td>
                        </tr>
                    <!-- </apex:outputPanel> -->
                    
                    <apex:outputPanel rendered="{!transactionRecords.size == 0}">
                        <tr>
                            <td colspan="7" class="no-data">
                                No transaction data available
                            </td>
                        </tr>
                    </apex:outputPanel>

                </tbody>
            </table>
        </div>

        <!-- Footer -->
        <div style="position: running(footer); display: block; text-align: center; padding-top: 10px; border-top: 1px solid #ddd; font-size: 9px; color: #666;">
            <div class="page-number"></div>
        </div>
        
    </body>
</apex:page>